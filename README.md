# dart_bit_buffer

`dart_bit_buffer` æ˜¯ä¸€ä¸ªé«˜æ•ˆçš„ä½æ“ä½œç¼“å†²åŒºåº“ï¼Œæä¾›äº†å¯¹ä½çº§åˆ«æ•°æ®çš„è¯»å†™æ“ä½œï¼Œé€‚ç”¨äºéœ€è¦ç²¾ç»†æ§åˆ¶æ¯”ç‰¹æµçš„åœºæ™¯ã€‚

---

## âš™ï¸ åŠŸèƒ½

- ğŸ”¢ æä¾›é«˜æ•ˆçš„æ¯”ç‰¹æ“ä½œï¼ŒåŒ…æ‹¬è¯»å–å’Œå†™å…¥å•ä¸ªæ¯”ç‰¹ã€æ•´æ•°ã€å¸ƒå°”å€¼ç­‰
- ğŸ› ï¸ æ”¯æŒæœ‰ç¬¦å·å’Œæ— ç¬¦å·æ•´æ•°çš„ä½çº§åˆ«æ“ä½œï¼Œæ”¯æŒä¸åŒçš„æ¯”ç‰¹é¡ºåºï¼ˆMSBFirst, LSBFirstï¼‰
- ğŸ”„ æä¾›ç¼“å†²åŒºçš„åŠ¨æ€æ‰©å±•å’Œè·³è¿‡ã€å¯»å€ç­‰åŠŸèƒ½
- ğŸ§  æä¾›çµæ´»çš„ç¼“å†²åŒºç®¡ç†ï¼Œè‡ªåŠ¨æ‰©å±•æˆ–è£å‰ªç¼“å†²åŒºå¤§å°

---

## ğŸ“¥ å®‰è£…

åœ¨ `pubspec.yaml` æ–‡ä»¶ä¸­æ·»åŠ ä¾èµ–ï¼š

```yaml
dependencies:
  bit_buffer:
    git:
      url: https://github.com/halifox/dart_bit_buffer
      ref: 1.0.1
```

---

## ğŸ› ï¸ ä½¿ç”¨æ–¹æ³•

```dart
final buffer = BitBuffer();

// åˆ›å»º BitBufferWriter ç”¨äºå†™å…¥æ•°æ®
final writer = BitBufferWriter(buffer);
writer.putBool(true);
writer.putInt(-123, binaryDigits: 32);

// åˆ›å»º BitBufferReader ç”¨äºè¯»å–æ•°æ®
final reader = BitBufferReader(buffer);
bool value = reader.getBool();  // è¯»å–å¸ƒå°”å€¼
int number = reader.getInt(binaryDigits: 32);  // è¯»å–æœ‰ç¬¦å·æ•´æ•°
```

**ä» UDP æ¥æ”¶æ•°æ®å¹¶è½¬æ¢ä¸º BitBuffer**

```dart
Datagram? datagram = socket.receive();
Uint8List data = datagram.data;
BitBuffer bitBuffer = BitBuffer.formUInt8List(data);
```

**å†™å…¥å•ä¸ªæ¯”ç‰¹**

```dart
writer.putBit(1); // å†™å…¥ 1
writer.putBit(0); // å†™å…¥ 0
```

**å†™å…¥æ•´æ•°**

```dart
writer.putInt(1234, binaryDigits: 32); // å†™å…¥ 32 ä½æ•´æ•°
writer.putUnsignedInt(4321, binaryDigits: 32); // å†™å…¥æ— ç¬¦å· 32 ä½æ•´æ•°
```

**è¯»å–æ•°æ®**

```dart
int value = reader.getInt(binaryDigits: 32);  // è¯»å–ä¸€ä¸ªæœ‰ç¬¦å·æ•´æ•°
```

---

## API

### BitBufferWriter

- **putBool**: å†™å…¥ä¸€ä¸ªå¸ƒå°”å€¼ï¼ˆtrue/falseï¼‰ã€‚
- **putBit**: å†™å…¥ä¸€ä¸ªå•æ¯”ç‰¹å€¼ï¼ˆ0 æˆ– 1ï¼‰ã€‚
- **putInt**: å†™å…¥ä¸€ä¸ªæœ‰ç¬¦å·æ•´æ•°ã€‚
- **putUnsignedInt**: å†™å…¥ä¸€ä¸ªæ— ç¬¦å·æ•´æ•°ã€‚
- **skip**: è·³è¿‡æŒ‡å®šæ•°é‡çš„æ¯”ç‰¹ã€‚
- **seekTo**: å°†å†™å…¥ä½ç½®ç§»åŠ¨åˆ°æŒ‡å®šä½ç½®ã€‚
- **allocateIfNeeded**: ç¡®ä¿æœ‰è¶³å¤Ÿç©ºé—´å†™å…¥æŒ‡å®šæ•°é‡çš„æ¯”ç‰¹ã€‚

### BitBufferReader

- **getBool**: è¯»å–ä¸€ä¸ªå¸ƒå°”å€¼ï¼ˆtrue/falseï¼‰ã€‚
- **getBit**: è¯»å–ä¸€ä¸ªå•æ¯”ç‰¹å€¼ï¼ˆ0 æˆ– 1ï¼‰ã€‚
- **getInt**: è¯»å–ä¸€ä¸ªæœ‰ç¬¦å·æ•´æ•°ã€‚
- **getUnsignedInt**: è¯»å–ä¸€ä¸ªæ— ç¬¦å·æ•´æ•°ã€‚
- **skip**: è·³è¿‡æŒ‡å®šæ•°é‡çš„æ¯”ç‰¹ã€‚
- **seekTo**: å°†è¯»å–ä½ç½®ç§»åŠ¨åˆ°æŒ‡å®šä½ç½®ã€‚

### BitBuffer

- **allocate**: åŠ¨æ€åˆ†é…æ›´å¤šæ¯”ç‰¹ç©ºé—´ã€‚
- **trim**: è£å‰ªæ‰å¤šä½™çš„æ¯”ç‰¹ç©ºé—´ã€‚
- **getBit**: è·å–æŒ‡å®šä½ç½®çš„æ¯”ç‰¹å€¼ã€‚
- **setBit**: è®¾ç½®æŒ‡å®šä½ç½®çš„æ¯”ç‰¹å€¼ã€‚
- **toSectionString**: è·å–æŒ‡å®šèŒƒå›´å†…çš„æ¯”ç‰¹åºåˆ—å­—ç¬¦ä¸²ã€‚
- **formIntList**: ä» `List<int>` åˆ›å»ºä¸€ä¸ª `BitBuffer` å®ä¾‹ï¼Œæ¯ä¸ªæ•´æ•°æŒ‰ç…§æŒ‡å®šçš„æ¯”ç‰¹æ•°è¿›è¡Œç¼–ç ã€‚
- **formUIntList**: ä» `List<int>` åˆ›å»ºä¸€ä¸ª `BitBuffer` å®ä¾‹ï¼ŒæŒ‰ç…§æŒ‡å®šçš„æ¯”ç‰¹æ•°å°†æ— ç¬¦å·æ•´æ•°ç¼–ç åˆ°æ¯”ç‰¹ç¼“å†²åŒºã€‚
- **formUInt8List**: ä» `Uint8List` åˆ›å»ºä¸€ä¸ª `BitBuffer` å®ä¾‹ï¼Œæ¯ä¸ªå­—èŠ‚ï¼ˆ8ä½ï¼‰è¢«è½¬æ¢ä¸ºæ¯”ç‰¹æµã€‚

---

## ğŸ¤ è´¡çŒ®

æˆ‘ä»¬æ¬¢è¿ä»»ä½•å½¢å¼çš„ç¤¾åŒºè´¡çŒ®ï¼

è¯·é˜…è¯» [è´¡çŒ®æŒ‡å— (CONTRIBUTING.md)](CONTRIBUTING.md)ï¼Œäº†è§£å¦‚ä½•æäº¤ Issueã€è¯·æ±‚åŠŸèƒ½æˆ–è´¡çŒ®ä»£ç ã€‚

---

## ğŸ“œ è®¸å¯è¯

æœ¬é¡¹ç›®éµå¾ª [LGPL-3.0 License](LICENSE)ã€‚

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…å’Œç¤¾åŒºæ”¯æŒï¼

## ğŸ“¢ æ³•å¾‹å£°æ˜

æœ¬å¼€æºé¡¹ç›®ä»…ä¾›å­¦ä¹ å’Œäº¤æµç”¨é€”ã€‚ç”±äºå¯èƒ½æ¶‰åŠä¸“åˆ©æˆ–ç‰ˆæƒç›¸å…³å†…å®¹ï¼Œè¯·åœ¨ä½¿ç”¨å‰ç¡®ä¿å·²å……åˆ†ç†è§£ç›¸å…³æ³•å¾‹æ³•è§„ã€‚æœªç»æˆæƒï¼Œ**è¯·å‹¿å°†æœ¬å·¥å…·ç”¨äºå•†ä¸šç”¨é€”æˆ–è¿›è¡Œä»»ä½•å½¢å¼çš„ä¼ æ’­**ã€‚

æœ¬é¡¹ç›®çš„æ‰€æœ‰ä»£ç å’Œç›¸å…³å†…å®¹ä»…ä¾›ä¸ªäººæŠ€æœ¯å­¦ä¹ ä¸å‚è€ƒï¼Œä»»ä½•ä½¿ç”¨äº§ç”Ÿçš„æ³•å¾‹è´£ä»»ç”±ä½¿ç”¨è€…è‡ªè¡Œæ‰¿æ‹…ã€‚

æ„Ÿè°¢æ‚¨çš„ç†è§£ä¸æ”¯æŒã€‚